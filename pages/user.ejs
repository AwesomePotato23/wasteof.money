<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head.ejs', {page: "user"}); %>


<body>
    <%- include('../partials/nav.ejs', {active: "user_"+user.name, user:loggedInUser}); %>
    <main class='container mx-auto px-4 mt-24 md:mt-16'>
        <img src="/picture/<%= user.name %>" height="30px" class='rounded-full h-10 inline-block shadow'>
        <h1 class="inline-block font-bold">@<%= user.name %></h1>
        <p class="text-gray-700 italic">id: <%= user._id %></p>
        <% posts.forEach(post => { %>
        <div class="max-w-2xl flex p-6 mx-auto my-5 bg-white rounded-lg shadow-md <%= activePost==post._id ? 'bg-indigo-100' : 'bg-white' %>">
            <div class="pt-1">
                <img src="/picture/<%= post.poster %>" height="30px" class='rounded-full h-6 inline-block shadow'>
                <h4 class="inline-block text-xl text-gray-900 leading-tight align-middle">@<%= post.poster %></h4>
                <p class="text-base text-gray-600 leading-normal"><%= post.content %></p>
                <p class="text-base text-gray-500 italic leading-normal"><%= new Date(post.time).toLocaleDateString("en-US") + ' ' + new Date(post.time).toLocaleTimeString("en-US") %> - <%= post._id %></p>
            </div>
        </div>
        <% }) %>
    </main>
</body>

<%- include('../partials/scripts.ejs'); %>
<script>
    if (document.location.hash) {
        var postEl = document.getElementById(document.location.hash.split('#')[1])
        postEl.style.backgroundColor = 'var(--brand-lighter)'
        setTimeout(function () {
            postEl.style.backgroundColor = ''
        }, 2000)
    }
</script>

</html>