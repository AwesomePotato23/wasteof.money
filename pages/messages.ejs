<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head.ejs', {page: "messages"}); %>

<body class='bg-gray-100'>
    <%- include('../partials/nav.ejs', {active: "messages", user, loggedIn}); %>

    <main class='container mx-auto px-4 mt-24 md:mt-16'>
        <h1 class="inline-block font-bold text-2xl">Messages</h1>
        <span class="inline-block text-xs font-semibold py-1 px-2 rounded-full text-red-600 bg-red-200 uppercase last:mr-0 mr-1">
            <%= messages.unread.length %> unread
        </span>
        <% messages.unread.forEach(message => { %>
            <div class="max-w-2xl flex p-6 mx-auto my-5 bg-indigo-100 rounded-lg shadow-md">
            <div class="pt-1">
                <p class="text-base text-gray-800 leading-normal"><%- message.content %></p>
                <p class="text-base text-gray-500 italic leading-normal">
                <%= new Date(message.time).toLocaleDateString("en-US") + ' ' + new Date(message.time).toLocaleTimeString("en-US") %>
                </p>
            </div>
        </div>
        <% }) %>
        <% messages.read.forEach(message => { %>
            <div class="max-w-2xl flex p-6 mx-auto my-5 bg-white rounded-lg shadow-md">
            <div class="pt-1">
                <p class="text-base text-gray-600 leading-normal"><%- message.content %></p>
                <p class="text-base text-gray-500 italic leading-normal">
                <%= new Date(message.time).toLocaleDateString("en-US") + ' ' + new Date(message.time).toLocaleTimeString("en-US") %>
                </p>
            </div>
        </div>
        <% }) %>
    </main>
</body>

<%- include('../partials/scripts.ejs'); %>

</html>